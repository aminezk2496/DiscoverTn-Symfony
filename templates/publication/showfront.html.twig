{% extends 'base-front.html.twig' %}

{% block title %}Commentaire index
{% endblock %}

{% block body %}
    <main>

        <head>
            <meta charset="utf-8">
            <title> home</title>
            <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,700|Raleway:300,400,500,700">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
            <link href="{{ asset('front/css/post1.css') }}" rel='stylesheet' type='text/css' />

            <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
            <!-- Leave those next 4 lines if you care about users using IE8 -->
            <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
            <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
            <![endif]-->
        </head>
        <div class="row">
            <div class="col-md-12">
                <form id="search-form" class="form-inline my-2 my-lg-0">
                    <div class="form-group mr-sm-2">
                        <input type="text" id="search-input" class="form-control" placeholder="Search...">
                    </div>
                </form>
                <button type="button" class="btn btn-primary my-2 my-sm-0" onclick="window.location.href='{{ path('app_publication_new') }}'">Create new</button>
            </div>
        </div>

        <div class="wrapper-grey padded">
            <div class="container">
                <h2 class="text-center">Community</h2>
                <div class="row">
                    {% for publication in publications %}
                    <div class="col-md-4 mb-4">
                        <div class="card" style="background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)), url(http://localhost/{{ publication.urlimage|slice(16) }}) no-repeat center center; background-size: cover;">
                            <div class="card-category">City</div>
                            <div class="card-description">
                                <h2>{{ publication.contenu }}</h2>
                            </div>
                            {% for u in users %}
                            {%if u.loginUtilisateur==publication.iduser %}
                            <img class="card-user avatar avatar-large" src="{{"http:\\\\localhost\\"~u.imageUtilisateur| slice(16) }}" alt="Profile" style="width:50px ; border-radius: 50%" class="rounded-circle">
                            {% endif %}
                            {% endfor %}
                            <a class="card-link" href="{{ path('app_publication_community', {'id': publication.id}) }}"></a>
                        </div>
                    </div>
                    {% if loop.index % 3 == 0 %}
                </div>
                <div class="row">
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>


        <!-- Including Bootstrap JS (with its jQuery dependency) so that dynamic components work -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

    </main>
    <script>
        $(document).ready(function() {
            // Handle search input change event
            $('#search-input').on('input', function() {
                var query = $(this).val().trim().toLowerCase();

                // Filter publications by query
                $('.card').each(function() {
                    var $card = $(this);
                    var contenu = $card.find('.card-description h2').text().trim().toLowerCase();

                    if (contenu.indexOf(query) === -1) {
                        $card.hide();
                    } else {
                        $card.show();
                        $card.prependTo($card.parent());
                    }
                });
            });
        });
    </script>
    <style>
        #search-input {
            width: 300px;
        }

        #search-form button {
            margin-left: 10px;
        }

        .btn-primary {
            background-color: #2b2d42;
            border-color: #2b2d42;
        }

        .btn-primary:hover {
            background-color: #1d1f33;
            border-color: #1d1f33;
        }

        .btn-outline-success {
            color: #2b2d42;
            border-color: #2b2d42;
        }

        .btn-outline-success:hover {
            color: #fff;
            background-color: #2b2d42;
            border-color: #2b2d42;
        }

    </style>







{% endblock  %}